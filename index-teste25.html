<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simulado AMRIGS</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0e1a2b;
      color: #ffffff;
    }

    main {
      max-width: 800px;
      margin: auto;
      background: #16273e;
      padding: 30px;
      border-radius: 10px;
      margin-top: 40px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
      position: relative;
    }

    nav {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    .btn {
      background-color: #1f3b5b;
      border: none;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }

    .btn:hover {
      background-color: #29527a;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    .option-label {
      display: block;
      background: #1b2c47;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .option-label:hover {
      background: #244063;
    }

    .correct {
      background: #225c2e !important;
    }

    .wrong {
      background: #762c2c !important;
    }

    #flag-icon {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
    }

    .flagged {
      color: yellow;
    }

    #show-flagged {
      position: fixed;
      top: 50px;
      right: 20px;
      z-index: 1001;
      background-color: #f5a623;
      color: black;
    }

    #results {
      display: none;
      padding: 20px;
      background: #1b2c47;
      border-radius: 10px;
      max-width: 900px;
      margin: auto;
      margin-top: 40px;
    }

    details {
      margin-bottom: 15px;
    }

    summary {
      font-weight: bold;
    }

    .filters {
      margin-bottom: 15px;
    }

    .filters button {
      margin-right: 10px;
    }

    #flag-sidebar {
      position: fixed;
      top: 0;
      right: -400px;
      width: 300px;
      height: 100vh;
      background: #1b2c47;
      color: white;
      padding: 20px;
      overflow-y: auto;
      transition: right 0.3s ease;
      z-index: 1000;
      box-shadow: -2px 0 10px rgba(0,0,0,0.6);
    }

    #flag-sidebar.show {
      right: 0;
    }

    #flag-sidebar h3 {
      margin-top: 0;
    }

    .flagged-question {
      margin-bottom: 20px;
      cursor: pointer;
      border-bottom: 1px solid #444;
      padding-bottom: 10px;
    }

    .flagged-question:hover {
      background-color: #244063;
    }
  </style>
</head>
<body>

  <main>
    <div id="flag-icon">⚑</div>
    <button class="btn" id="show-flagged">Marcadas</button>
    <h2 id="area-title"></h2>
    <p id="question-text"></p>
    <ul id="options"></ul>
    <p id="feedback"></p>
    <nav>
      <button class="btn" id="prev">Anterior</button>
      <button class="btn" id="next">Próxima</button>
    </nav>
  </main>

  

  <div id="flag-sidebar">
    <h3>Questões Marcadas</h3>
    <button class="btn" onclick="toggleFlagSidebar()">Fechar</button>
    <div id="flagged-list"></div>
  </div>

  <div id="results">
    <h2>Resultado</h2>
    <p id="score"></p>
    <div class="filters">
      <button class="btn" onclick="showFilteredQuestions('all')">Todas as Perguntas</button>
      <button class="btn" onclick="showFilteredQuestions('correct')">Corretas</button>
      <button class="btn" onclick="showFilteredQuestions('incorrect')">Incorretas</button>
    </div>
    <div id="explanations"></div>
  </div>
  <script>
    let idx = 0;
    let score = 0;
    const flagged = new Set();

    const questions = [
  {
    "numero": 1,
    "area": "Clínica Médica",
    "question": "Sobre a hipertensão arterial sistêmica, analise as assertivas a seguir: I. Para diagnóstico, indica-se a medição anual de pressão arterial se a pressão arterial aferida for inferior a 140/90 mmHg. II. O diagnóstico da hipertensão arterial sistêmica deve ser baseado na medição da pressão fora do consultório com monitorização ambulatorial da pressão arterial, desde que seja viável sua realização. III. História prévia de pré-eclâmpsia em mulheres é fator de risco para hipertensão arterial sistêmica. Quais estão corretas?",
    "options": {
      "A": "Apenas I e II.",
      "B": "Apenas I e III.",
      "C": "Apenas II e III.",
      "D": "I, II e III."
    },
    "correct": "D",
    "explanation": "Todas as assertivas estão corretas: I porque a medição anual é indicada para pressão abaixo de 140/90 mmHg; II porque o diagnóstico correto deve considerar medidas fora do consultório, quando possível; III porque história prévia de pré-eclâmpsia é fator de risco conhecido para HAS."
  },
  {
    "numero": 2,
    "area": "Clínica Médica",
    "question": "Sobre a dengue, analise as assertivas a seguir: I. Existem técnicas laboratoriais para identificação do vírus (até o 5º dia de início da doença) e pesquisa de anticorpos (a partir do 6º dia de início da doença). II. O tratamento inclui medidas de suporte, hidratação, repouso e antibioticoterapia. III. O controle do vetor Aedes aegypti é o principal método para a prevenção. Quais estão corretas?",
    "options": {
      "A": "Apenas I e II.",
      "B": "Apenas I e III.",
      "C": "Apenas II e III.",
      "D": "I, II e III."
    },
    "correct": "B",
    "explanation": "I está correta pois a detecção do vírus ocorre nos primeiros 5 dias e anticorpos depois; III está correta porque o controle do Aedes aegypti é o principal método preventivo. II está incorreta porque a antibioticoterapia não faz parte do tratamento da dengue."
  },
  {
    "numero": 3,
    "area": "Clínica Médica",
    "question": "Em relação ao colesterol, analise as assertivas a seguir: I. Níveis elevados de HDL-C costumam estar relacionados a menor risco cardiovascular. II. Altos níveis de HDL-C decorrentes de algumas doenças genéticas podem não proteger de doença cardiovascular, provavelmente em razão das alterações metabólicas e lipídicas concomitantes. III. Causas secundárias de HDL-C elevado incluem cirrose biliar primária, hipertireoidismo e alcoolismo sem cirrose. Quais estão corretas?",
    "options": {
      "A": "Apenas I e II.",
      "B": "Apenas I e III.",
      "C": "Apenas II e III.",
      "D": "I, II e III."
    },
    "correct": "A",
    "explanation": "I está correta pois HDL-C elevado geralmente é protetor; II está correta pois algumas mutações genéticas que elevam HDL-C não conferem proteção cardiovascular; III está incorreta porque hipertireoidismo geralmente reduz HDL-C, não eleva."
  },
  {
    "numero": 4,
    "area": "Clínica Médica",
    "question": "Em relação à leptospirose, analise as assertivas a seguir: I. A penetração do Leptospira ocorre apenas a partir de lesões de pele imersa por longos períodos em água contaminada. II. O período de incubação pode variar de 1 a 30 dias e normalmente ocorre entre 7 e 14 dias após a exposição a situações de risco. III. A antibioticoterapia está indicada em qualquer período da doença, mas sua eficácia costuma ser maior na 1ª semana do início dos sintomas. Quais estão corretas?",
    "options": {
      "A": "Apenas I e II.",
      "B": "Apenas I e III.",
      "C": "Apenas II e III.",
      "D": "I, II e III."
    },
    "correct": "C",
    "explanation": "I está incorreta porque a penetração do Leptospira pode ocorrer também por mucosas e pequenas lesões de pele, não apenas lesões imersas prolongadamente; II e III estão corretas quanto ao período de incubação e indicação da antibioticoterapia precoce."
  },
  {
    "numero": 5,
    "area": "Clínica Médica",
    "question": "Em relação à nefropatia diabética, analise as assertivas a seguir: I. No estágio de nefropatia incipiente, ainda não há alteração na membrana basal glomerular nem no mesângio. II. A nefropatia clínica é caracterizada pela proteinúria persistente superior a 500 mg/24h, excreção urinária de albumina superior a 200 mg/L e declínio da taxa de filtração glomerular. III. No estágio de doença renal crônica, estabelecida a proteinúria, os pacientes passam a perder gradativamente a função renal, e mais de 10% evoluem para a doença renal crônica. Quais estão corretas?",
    "options": {
      "A": "Apenas I e II.",
      "B": "Apenas I e III.",
      "C": "Apenas II e III.",
      "D": "I, II e III."
    },
    "correct": "*",
    "explanation": "Questão anulada!"
  },
  {
    "numero": 26,
    "area": "Cirurgia Geral",
    "question": "Paciente com fibrilação atrial, com quadro de dor abdominal e história de colecistectomia prévia. A dor iniciou em epigástrio e irradiou para a região umbilical e fossa ilíaca direita. Apresenta temperatura axilar 37,5°C, acompanhada de náuseas e vômitos. Ao exame físico, apresentou dor à palpação abdominal e presença de sinal de Blumberg. Qual é a hipótese diagnóstica mais provável no caso?",
    "options": {
      "A": "Síndrome intestinal inflamatória.",
      "B": "Doença de Crohn.",
      "C": "Trombose mesentérica.",
      "D": "Apendicite aguda."
    },
    "correct": "D",
    "explanation": "Sinal de Blumberg indica irritação peritoneal, comum em apendicite aguda."
  },
  {
    "numero": 27,
    "area": "Cirurgia Geral",
    "question": "Pólipos de vesícula biliar são achados comuns em ecografias. Assinale a alternativa que apresenta uma indicação para tratamento cirúrgico nesse caso.",
    "options": {
      "A": "História familiar de neoplasia de via biliar.",
      "B": "Medida do pólipo acima de 8 milímetros.",
      "C": "Presença de pólipos em colón.",
      "D": "Pólipos múltiplos."
    },
    "correct": "B",
    "explanation": "Pólipos maiores que 1 cm (> 8 mm) apresentam maior risco de malignidade, sendo indicação para colecistectomia."
  },
  {
    "numero": 28,
    "area": "Cirurgia Geral",
    "question": "Sobre as hérnias de hiato, é INCORRETO afirmar que:",
    "options": {
      "A": "Qualquer tipo de hérnia pode gerar sintomas clássicos de refluxo.",
      "B": "A membrana frenoesofágica é uma continuação da fáscia endoabdominal que se ancora no esôfago.",
      "C": "As hérnias paraesofágicas podem estar associadas à doença do refluxo gastroesofágico (DRGE).",
      "D": "A pressão relativamente positiva dentro do tórax facilita a migração visceral."
    },
    "correct": "D",
    "explanation": "A pressão intratorácica é negativa, não positiva; isso dificulta a migração do estômago para o tórax, tornando a afirmativa incorreta."
  },
  {
    "numero": 29,
    "area": "Cirurgia Geral",
    "question": "Sobre o tratamento da DRGE, assinale a alternativa correta.",
    "options": {
      "A": "Endoscopia Digestiva Alta (EDA), manometria, monitoramento do pH, esofagograma e cintilografia são exames essenciais para avaliação pré-operatória.",
      "B": "O Inibidor de Bomba de Prótons (IBP) age ligando-se de forma reversível às células parietais do estômago.",
      "C": "O padrão-ouro para o diagnóstico da DRGE é a pHmetria de 24 horas.",
      "D": "A dose mínima de IBP é o padrão-ouro para o manejo dos sintomas de refluxo."
    },
    "correct": "C",
    "explanation": "A pHmetria de 24 horas é o exame padrão-ouro para confirmar refluxo ácido na DRGE."
  },
  {
    "numero": 30,
    "area": "Cirurgia Geral",
    "question": "Homem, 72 anos, apresenta quadro de dor epigástrica há cerca de 90 dias. Na última semana, apresentou quadro de hemorragia digestiva baixa. EDA mostra lesão submucosa, com área de ulceração central, com cerca de 4 cm na região do corpo do estômago. Biópsia endoscópica não revela tumor. Tomografia computadorizada de abdome sugere diagnóstico de tumor do estroma gastrointestinal (GIST) de 8 cm no maior diâmetro. Considerando o caso apresentado, analise as assertivas a seguir: I. Biópsia percutânea guiada por tomografia computadorizada é o melhor método para definir o diagnóstico dessa lesão. II. O exame imunoistoquímico é fundamental para o diagnóstico desses tumores. III. A profundidade da invasão na parede gástrica e a presença de linfonodos comprometidos são os principais fatores prognósticos para definir a sobrevida. Quais estão corretas?",
    "options": {
      "A": "Apenas I.",
      "B": "Apenas II.",
      "C": "Apenas III.",
      "D": "Apenas II e III."
    },
    "correct": "B",
    "explanation": "O exame imunoistoquímico (marcadores como CD117) é essencial para diagnóstico; a biópsia percutânea pode causar disseminação; a presença de linfonodos não é comum em GISTs, portanto III está incorreta."
    },
    {
    "numero": 51,
    "area": "Ginecologia e Obstetrícia",
    "question": "Considerando a Figura 2 abaixo, o diagnóstico mais provável e a conduta mais adequada são, respectivamente:",
    "options": {
      "A": "Retocele – cirurgia de Burch.",
      "B": "Retocele – cirurgia de colpocleise (Le Fort).",
      "C": "Cisto de Bartholin – marsupialização.",
      "D": "Cistocele – encaminhar para centro especializado, se a paciente for sintomática."
    },
    "correct": "D",
    "explanation": "Cistocele é o prolapso da parede anterior da vagina, e o encaminhamento para tratamento especializado é indicado se houver sintomas."
  },
  {
    "numero": 52,
    "area": "Ginecologia e Obstetrícia",
    "question": "Uma mulher de 24 anos foi submetida a parto cesáreo, há três dias, por parada do trabalho de parto. Após a cesárea, permaneceu 10 horas com sondagem vesical de demora. Hoje, vem à consulta por apresentar febre de 38,8°C. Nega tosse ou disúria. Ao exame físico, as mamas apresentam saída espontânea de leite. Não há dor na região costovertebral ou na incisão cutânea. O fundo uterino está acima da cicatriz umbilical e é doloroso. Considerando o caso apresentado, o diagnóstico mais provável e a conduta são, respectivamente:",
    "options": {
      "A": "Endometrite – antibioticoterapia.",
      "B": "Pielonefrite – antibioticoterapia.",
      "C": "Ingurgitamento mamário – analgésicos orais.",
      "D": "Hematoma supra-aponeurótico – drenagem com agulha grossa."
    },
    "correct": "A",
    "explanation": "Febre pós-cesárea com útero doloroso e aumentado sugere endometrite, que deve ser tratada com antibioticoterapia adequada."
  },
  {
    "numero": 53,
    "area": "Ginecologia e Obstetrícia",
    "question": "O transporte de substâncias por meio da placenta ocorre por meio dos seguintes mecanismos:\nI. Difusão simples.\nII. Transporte ativo.\nIII. Pinocitose.",
    "options": {
      "A": "Apenas I.",
      "B": "Apenas II.",
      "C": "Apenas III.",
      "D": "I, II e III."
    },
    "correct": "D",
    "explanation": "A placenta utiliza múltiplos mecanismos de transporte, incluindo difusão simples, transporte ativo e pinocitose para passagem de substâncias entre mãe e feto."
    },
    {
    "numero": 54,
    "area": "Ginecologia e Obstetrícia",
    "question": "Paciente com 13 semanas de gestação gemelar, dicoriônica e diamniótica, vem para o pré-natal de rotina na unidade de saúde. No momento, não apresenta queixas. Nesse caso, o médico deve:",
    "options": {
      "A": "Prescrever ácido acetilsalicílico para prevenir pré-eclâmpsia.",
      "B": "Solicitar doppler das artérias uterinas para avaliar risco de crescimento fetal restrito.",
      "C": "Agendar consulta para início do pré-natal com 20 semanas.",
      "D": "Encaminhar para serviço terciário para realização de cesariana eletiva."
    },
    "correct": "A",
    "explanation": "A prescrição de ácido acetilsalicílico em gestantes com risco aumentado de pré-eclâmpsia, como em gestações gemelares, é recomendada para prevenção dessa complicação, especialmente quando iniciada antes das 16 semanas de gestação."
  },
  {
    "numero": 55,
    "area": "Ginecologia e Obstetrícia",
    "question": "Lactente de 3 meses, alimentado exclusivamente ao seio, comparece para consulta de rotina. Ao exame, encontra-se ativo, com bom ganho ponderal. Mãe relata que evacua a cada 4 a 6 dias, fezes pastosas, sem esforço evacuatório ou choro. O diagnóstico e a conduta são, respectivamente:",
    "options": {
      "A": "Constipação funcional – prescrever supositório.",
      "B": "Doença de Hirschsprung – encaminhar para cirurgia.",
      "C": "Evacuação fisiológica do lactente – orientar e acompanhar.",
      "D": "Síndrome do intestino irritável – prescrever antiespasmódico."
    },
    "correct": "C",
    "explanation": "Evacuações espaçadas em lactentes exclusivamente amamentados ao seio são normais, desde que as fezes estejam pastosas e o bebê esteja ganhando peso adequadamente, caracterizando evacuação fisiológica, não necessitando intervenção."
  },
  {
    "numero": 76,
    "area": "Pediatria e MPS",
    "question": "Mulher de 65 anos apresenta lesão infiltrativa e ulcerada na borda lateral da língua, de crescimento progressivo. História de tabagismo e etilismo. O diagnóstico mais provável é:",
    "options": {
      "A": "Candidíase oral.",
      "B": "Leucoplasia pilosa oral.",
      "C": "Carcinoma espinocelular.",
      "D": "Líquen plano erosivo."
    },
    "correct": "C",
    "explanation": "Carcinoma espinocelular é o tumor maligno mais comum da cavidade oral, associado a tabagismo e etilismo, caracterizado por lesão ulcerada e infiltrativa."
  },
  {
    "numero": 77,
    "area": "Pediatria e MPS",
    "question": "Homem de 50 anos apresenta dor epigástrica há 2 meses, que piora com a alimentação. Nega perda de peso. H. pylori positivo. A melhor conduta é:",
    "options": {
      "A": "Realizar endoscopia de urgência.",
      "B": "Iniciar IBP e erradicação do H. pylori.",
      "C": "Solicitar TC de abdome.",
      "D": "Prescrever antiácido e observar evolução."
    },
    "correct": "B",
    "explanation": "Dor que piora com a alimentação sugere úlcera péptica; confirmação de H. pylori indica tratamento com inibidor da bomba de prótons e terapia para erradicação do microrganismo."
  },
  {
    "numero": 78,
    "area": "Pediatria e MPS",
    "question": "Mulher de 25 anos refere dor abdominal intensa no quadrante inferior direito e febre. Ao exame, sinal de Blumberg positivo. A hipótese mais provável é:",
    "options": {
      "A": "Cistite aguda.",
      "B": "Apendicite aguda.",
      "C": "Doença inflamatória pélvica.",
      "D": "Torção de cisto ovariano."
    },
    "correct": "B",
    "explanation": "Dor no quadrante inferior direito com sinal de Blumberg (dor à descompressão) e febre é típico de apendicite aguda."
  },
  {
    "numero": 79,
    "area": "Pediatria e MPS",
    "question": "Paciente de 40 anos com dor lombar crônica, sem irradiação, relacionada à postura. Qual a conduta mais adequada?",
    "options": {
      "A": "Prescrever opioides e repouso absoluto.",
      "B": "Encaminhar para cirurgia de coluna.",
      "C": "Recomendar fisioterapia e analgésicos comuns.",
      "D": "Solicitar ressonância magnética imediatamente."
    },
    "correct": "C",
    "explanation": "Dor lombar crônica sem sinais de alarme geralmente responde bem a fisioterapia e analgésicos simples. Repouso absoluto e opioides não são recomendados inicialmente."
  },
  {
    "numero": 80,
    "area": "Pediatria e MPS",
    "question": "Paciente de 29 anos, com dor torácica aguda em pontada, que piora com a inspiração. ECG e raio-x normais. A hipótese mais provável é:",
    "options": {
      "A": "Angina estável.",
      "B": "Pericardite.",
      "C": "Costocondrite.",
      "D": "Embolia pulmonar."
    },
    "correct": "C",
    "explanation": "Costocondrite causa dor torácica pleurítica e focal, sem alterações no ECG ou raio-x, geralmente autolimitada e relacionada a inflamação da cartilagem costal."
  }
];

    function init() {
      showQuestion();
      document.getElementById('next').onclick = () => navigate(1);
      document.getElementById('prev').onclick = () => navigate(-1);
      document.getElementById('flag-icon').onclick = toggleFlagIcon;
      document.getElementById('show-flagged').onclick = showFlaggedQuestions;
    }

    function showQuestion() {
      const q = questions[idx];
      document.getElementById('area-title').textContent = q.area;
      document.getElementById('question-text').textContent = `${q.numero}. ${q.question}`;

      const opts = document.getElementById('options');
      opts.innerHTML = '';

      for (const key in q.options) {
        const li = document.createElement('li');
        const label = document.createElement('label');
        label.className = 'option-label';

        if (q.answered) {
          if (key === q.correct) label.classList.add('correct');
          else if (key === q.answered) label.classList.add('wrong');
        }

        const input = document.createElement('input');
        input.type = 'radio';
        input.name = 'option';
        input.disabled = !!q.answered;
        input.checked = q.answered === key;
        input.onclick = () => selectAnswer(key);

        const span = document.createElement('span');
        span.textContent = `${key}) ${q.options[key]}`;

        label.appendChild(input);
        label.appendChild(span);
        li.appendChild(label);
        opts.appendChild(li);
      }

      const feedback = document.getElementById('feedback');
      if (q.answered) {
        feedback.textContent = q.answered === q.correct
          ? 'Resposta correta!'
          : `Errado. A resposta correta é: ${q.correct}) ${q.options[q.correct]}`;
        feedback.style.color = q.answered === q.correct ? 'lightgreen' : 'tomato';
      } else {
        feedback.textContent = '';
      }

      updateButtons();
      updateFlagButton();
    }

    function selectAnswer(choice) {
      const q = questions[idx];
      if (!q.answered) {
        q.answered = choice;
        if (choice === q.correct) score++;
      }
      showQuestion();
    }

    function navigate(step) {
      idx += step;
      if (idx < 0) idx = 0;
      if (idx >= questions.length) {
        showResults();
        return;
      }
      showQuestion();
    }

    function toggleFlagIcon() {
      flagged.has(idx) ? flagged.delete(idx) : flagged.add(idx);
      updateFlagButton();
    }

    function updateButtons() {
      document.getElementById('prev').disabled = idx === 0;
      document.getElementById('next').textContent = idx === questions.length - 1 ? 'Finalizar' : 'Próxima';
    }

    function updateFlagButton() {
      const icon = document.getElementById('flag-icon');
      icon.classList.remove('flagged');
      icon.textContent = flagged.has(idx) ? '✔️' : '⚑';
      if (flagged.has(idx)) icon.classList.add('flagged');
    }

    function showFlaggedQuestions() {
      if (flagged.size === 0) {
        alert('Nenhuma questão foi marcada ainda.');
        return;
      }

      const modal = document.createElement('div');
      modal.style.position = 'fixed';
      modal.style.top = '0';
      modal.style.left = '0';
      modal.style.width = '100vw';
      modal.style.height = '100vh';
      modal.style.background = 'rgba(0,0,0,0.7)';
      modal.style.display = 'flex';
      modal.style.justifyContent = 'center';
      modal.style.alignItems = 'center';
      modal.style.zIndex = 1000;

      const content = document.createElement('div');
      content.style.background = '#1b2c47';
      content.style.padding = '20px';
      content.style.borderRadius = '10px';
      content.style.color = '#fff';
      content.style.maxHeight = '90vh';
      content.style.overflowY = 'auto';

      const close = document.createElement('button');
      close.textContent = 'Fechar';
      close.className = 'btn';
      close.onclick = () => document.body.removeChild(modal);

      content.appendChild(close);
      flagged.forEach(i => {
        const q = questions[i];
        const div = document.createElement('div');
        div.innerHTML = `<h3>${q.numero}. ${q.area}</h3><p>${q.question}</p>`;
        const go = document.createElement('button');
        go.textContent = 'Ir para esta questão';
        go.className = 'btn';
        go.onclick = () => {
          idx = i;
          document.body.removeChild(modal);
          showQuestion();
        };
        div.appendChild(go);
        content.appendChild(div);
      });

      modal.appendChild(content);
      document.body.appendChild(modal);
    }

    function showResults() {
      document.querySelector('main').style.display = 'none';
      document.querySelector('nav').style.display = 'none';

      const results = document.getElementById('results');
      results.style.display = 'block';

      const pct = Math.round((score / questions.length) * 100);
      document.getElementById('score').textContent = `Você acertou ${score} de ${questions.length} questões (${pct}%).`;

      showFilteredQuestions('all');
    }

    function showFilteredQuestions(filter) {
  const ex = document.getElementById('explanations');
  ex.innerHTML = '';

  questions.forEach((q, i) => {
    const acertou = q.answered === q.correct;
    const foiMarcada = flagged.has(i);

    if (
      (filter === 'correct' && !acertou) ||
      (filter === 'incorrect' && acertou)
    ) return;

    const div = document.createElement('div');

    const marcadaTexto = foiMarcada
      ? `<br><span style="color: yellow;">⚑ Questão marcada</span>`
      : '';

    div.innerHTML =
      `<details>
        <summary style="color:${acertou ? 'lightgreen' : 'tomato'};">
          ${q.numero}. ${acertou ? 'Correta' : 'Errada'}
          <br><span style="color: white;">Sua resposta: ${q.answered ? `${q.answered}) ${q.options[q.answered]}` : '-'}</span>
          <br>Correta: ${q.correct}) ${q.options[q.correct]}
          ${marcadaTexto}
        </summary>
        <p style="margin-left:15px;">Explicação: ${q.explanation}</p>
      </details>`;
    ex.appendChild(div);
  });

    }

    init();
  </script>
</body>
</html>
