<script>
  let idx = 0;
  let score = 0;
  let questions = [];
  const flagged = new Set();

  async function init() {
    const data = await fetch('questions.json');
    const allQuestions = await data.json();

    // Agrupar por área
    const areas = ['Clínica Médica', 'Cirurgia Geral', 'Pediatria', 'MPS', 'Ginecologia e Obstetrícia'];
    const grouped = {};

    areas.forEach(area => grouped[area] = []);

    allQuestions.forEach(q => {
      if (grouped[q.area]) {
        grouped[q.area].push(q);
      }
    });

    // Pegar 5 aleatórias por área
    questions = areas.flatMap(area => shuffle(grouped[area]).slice(0, 5));

    showQuestion();
    document.getElementById('next').onclick = () => navigate(1);
    document.getElementById('prev').onclick = () => navigate(-1);
    document.getElementById('flag-icon').onclick = toggleFlagIcon;
    document.getElementById('show-flagged').onclick = showFlaggedQuestions;
  }

  // Função de embaralhar
  function shuffle(array) {
    const arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // (as demais funções permanecem iguais)
</script>
